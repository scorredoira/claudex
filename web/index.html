<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claudex - Claude Code Session Manager</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='25' y='35' width='50' height='45' rx='8' fill='%236366f1'/><rect x='30' y='20' width='40' height='25' rx='6' fill='%23fff'/><circle cx='42' cy='30' r='5' fill='%23333'/><circle cx='58' cy='30' r='5' fill='%23333'/><rect x='45' y='10' width='3' height='12' fill='%23888'/><circle cx='46.5' cy='8' r='5' fill='%236366f1'/><rect x='15' y='45' width='8' height='25' rx='3' fill='%23888'/><rect x='77' y='45' width='8' height='25' rx='3' fill='%23888'/></svg>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <header>
            <h1>Claudex</h1>
            <div class="header-actions">
                <button id="view-toggle" class="view-toggle" title="Toggle 3D view">
                    <span class="view-icon">3D</span>
                </button>
                <button id="theme-toggle" class="theme-toggle">
                    <span class="theme-icon">☀️</span>
                    <span class="theme-label">Dark</span>
                </button>
                <button id="new-session" class="btn-primary">+ New Session</button>
            </div>
        </header>

        <main id="sessions-grid">
            <!-- Session cards will be inserted here -->
        </main>

        <!-- 3D World Container -->
        <div id="world-3d" class="hidden">
            <canvas id="canvas-3d"></canvas>
            <div id="session-tooltip" class="session-tooltip hidden"></div>

            <!-- Radial Menu -->
            <div id="radial-menu" class="radial-menu">
                <div class="radial-menu-info">
                    <div class="radial-info-name"></div>
                    <div class="radial-info-details"></div>
                </div>
                <div class="radial-item" data-action="experiment">
                    <svg viewBox="0 0 24 24"><line x1="6" y1="3" x2="6" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 0 1-9 9"/></svg>
                    <span class="radial-item-label label-left">Experiment</span>
                </div>
                <div class="radial-item" data-action="customize">
                    <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
                    <span class="radial-item-label label-top">Customize</span>
                </div>
                <div class="radial-item" data-action="restart">
                    <svg viewBox="0 0 24 24"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                    <span class="radial-item-label label-top">Restart</span>
                </div>
                <div class="radial-item danger" data-action="delete">
                    <svg viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
                    <span class="radial-item-label label-right">Delete</span>
                </div>
            </div>

            <!-- Customize Panel -->
            <div id="customize-panel" class="customize-panel">
                <h3>
                    Customize
                    <button class="close-btn" id="customize-close">&times;</button>
                </h3>

                <div class="customize-section">
                    <label>Name</label>
                    <input type="text" id="customize-name" placeholder="Session name">
                </div>

                <div class="customize-section">
                    <label>Robot Model</label>
                    <div class="robot-models">
                        <div class="robot-model-option selected" data-model="classic" title="Classic">
                            <svg viewBox="0 0 40 40"><rect x="12" y="14" width="16" height="18" rx="2" fill="currentColor"/><rect x="14" y="6" width="12" height="10" rx="2" fill="#888"/><circle cx="17" cy="10" r="2" fill="#333"/><circle cx="23" cy="10" r="2" fill="#333"/></svg>
                        </div>
                        <div class="robot-model-option" data-model="round" title="Round">
                            <svg viewBox="0 0 40 40"><circle cx="20" cy="22" r="10" fill="currentColor"/><circle cx="20" cy="10" r="7" fill="#888"/><circle cx="17" cy="9" r="2" fill="#333"/><circle cx="23" cy="9" r="2" fill="#333"/></svg>
                        </div>
                        <div class="robot-model-option" data-model="tall" title="Tall">
                            <svg viewBox="0 0 40 40"><rect x="14" y="12" width="12" height="22" rx="2" fill="currentColor"/><rect x="15" y="4" width="10" height="9" rx="2" fill="#888"/><circle cx="18" cy="8" r="1.5" fill="#333"/><circle cx="22" cy="8" r="1.5" fill="#333"/></svg>
                        </div>
                        <div class="robot-model-option" data-model="chunky" title="Chunky">
                            <svg viewBox="0 0 40 40"><rect x="8" y="16" width="24" height="16" rx="3" fill="currentColor"/><rect x="12" y="8" width="16" height="10" rx="2" fill="#888"/><rect x="15" cy="12" width="4" height="3" fill="#333"/><rect x="21" cy="12" width="4" height="3" fill="#333"/></svg>
                        </div>
                        <div class="robot-model-option" data-model="mini" title="Mini">
                            <svg viewBox="0 0 40 40"><rect x="14" y="18" width="12" height="12" rx="6" fill="currentColor"/><circle cx="20" cy="12" r="6" fill="#888"/><circle cx="18" cy="11" r="1.5" fill="#333"/><circle cx="22" cy="11" r="1.5" fill="#333"/></svg>
                        </div>
                        <div class="robot-model-option" data-model="angular" title="Angular">
                            <svg viewBox="0 0 40 40"><polygon points="20,14 30,20 30,32 10,32 10,20" fill="currentColor"/><polygon points="20,4 28,10 12,10" fill="#888"/><circle cx="17" cy="8" r="1.5" fill="#333"/><circle cx="23" cy="8" r="1.5" fill="#333"/></svg>
                        </div>
                    </div>
                </div>

                <div class="customize-section">
                    <label>Color</label>
                    <div class="color-options">
                        <div class="color-option" data-color="#6366f1" style="background: #6366f1" title="Indigo"></div>
                        <div class="color-option" data-color="#8b5cf6" style="background: #8b5cf6" title="Purple"></div>
                        <div class="color-option" data-color="#ec4899" style="background: #ec4899" title="Pink"></div>
                        <div class="color-option" data-color="#ef4444" style="background: #ef4444" title="Red"></div>
                        <div class="color-option" data-color="#f97316" style="background: #f97316" title="Orange"></div>
                        <div class="color-option" data-color="#eab308" style="background: #eab308" title="Yellow"></div>
                        <div class="color-option" data-color="#22c55e" style="background: #22c55e" title="Green"></div>
                        <div class="color-option" data-color="#14b8a6" style="background: #14b8a6" title="Teal"></div>
                        <div class="color-option" data-color="#3b82f6" style="background: #3b82f6" title="Blue"></div>
                        <div class="color-option" data-color="#64748b" style="background: #64748b" title="Slate"></div>
                    </div>
                </div>

                <div class="customize-section">
                    <label>Accessories</label>
                    <div class="accessory-options">
                        <div class="accessory-option" data-accessory="none">None</div>
                        <div class="accessory-option" data-accessory="hat">Hat</div>
                        <div class="accessory-option" data-accessory="glasses">Glasses</div>
                        <div class="accessory-option" data-accessory="bowtie">Bowtie</div>
                        <div class="accessory-option" data-accessory="antenna">Antenna+</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for expanded session -->
        <div id="modal" class="modal fullscreen hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <input type="text" id="modal-title" value="Session" />
                    <div class="modal-actions">
                        <span id="modal-status" class="status-badge">idle</span>
                        <button id="modal-split-h" class="btn-icon" title="Split Horizontal">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <rect x="3" y="3" width="18" height="18" rx="2"/><line x1="12" y1="3" x2="12" y2="21"/>
                            </svg>
                        </button>
                        <button id="modal-split-v" class="btn-icon" title="Split Vertical">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <rect x="3" y="3" width="18" height="18" rx="2"/><line x1="3" y1="12" x2="21" y2="12"/>
                            </svg>
                        </button>
                        <button id="modal-experiment" class="btn-icon" title="Create Experiment">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <line x1="6" y1="3" x2="6" y2="15"/><circle cx="18" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><path d="M18 9a9 9 0 0 1-9 9"/>
                            </svg>
                        </button>
                        <button id="modal-customize" class="btn-icon" title="Customize Robot">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                            </svg>
                        </button>
                        <button id="modal-restart" class="btn-icon" title="Restart Session">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                            </svg>
                        </button>
                        <button id="modal-delete" class="btn-icon btn-icon-danger" title="Delete Session">
                            <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                                <polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                            </svg>
                        </button>
                        <button id="modal-close" class="btn-icon" title="Close (Shift+Esc)">&times;</button>
                    </div>
                </div>
                <div id="modal-panes">
                    <!-- Panes will be created dynamically -->
                </div>
            </div>
        </div>

        <!-- New session dialog -->
        <div id="new-session-dialog" class="modal hidden">
            <div class="dialog-content">
                <h2>New Session</h2>
                <form id="new-session-form">
                    <label>
                        Name:
                        <input type="text" id="session-name" placeholder="My Session" required>
                    </label>
                    <div class="dialog-actions">
                        <button type="button" id="cancel-new-session" class="btn-secondary">Cancel</button>
                        <button type="submit" class="btn-primary">Create</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Confirm delete dialog -->
        <div id="confirm-dialog" class="modal hidden">
            <div class="confirm-dialog">
                <h3>Delete session?</h3>
                <p id="confirm-message">This action cannot be undone.</p>
                <div class="dialog-actions">
                    <button type="button" id="confirm-cancel" class="btn-secondary">Cancel</button>
                    <button type="button" id="confirm-ok" class="btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-web-links@0.9.0/lib/xterm-addon-web-links.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-unicode11@0.6.0/lib/xterm-addon-unicode11.min.js"></script>
    <!-- Split.js for pane splitting -->
    <script src="https://cdn.jsdelivr.net/npm/split.js@1.6.5/dist/split.min.js"></script>
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="js/world3d.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
